FROM eclipse-temurin:21-jdk-alpine

ARG DB_USERNAME
ARG DB_PASSWORD
ARG DB_URL
ARG IMP_API_KEY
ARG IMP_API_SECRET
ARG IMPCODE

ENV DB_USERNAME=$DB_USERNAME \
    DB_PASSWORD=$DB_PASSWORD \
    DB_URL=$DB_URL \
    IMP_API_KEY=$IMP_API_KEY \
    IMP_API_SECRET=$IMP_API_SECRET \
    IMPCODE=$IMPCODE

WORKDIR /app

COPY mvnw pom.xml /app/
COPY .mvn /app/.mvn

COPY src /app/src

EXPOSE 8080

CMD ["./mvnw", "spring-boot:run"]
